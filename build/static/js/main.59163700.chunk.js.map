{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Persons","persons","personService","setPersons","setMessage","setErrorStatus","map","person","name","number","onClick","id","console","log","find","n","result","window","confirm","deletePerson","then","deletedPerson","filter","catch","err","setTimeout","handleDelete","Filter","value","onChange","PersonForm","newName","newNumber","addPerson","handlePersonChange","handleNumberChange","onSubmit","type","baseUrl","getAll","axios","get","res","data","create","newObject","post","update","put","delete","Notification","message","error","className","App","useState","setNewName","setNewNumber","searchName","setSearchName","errorStatus","useEffect","initialPersons","peopleFilters","lenght","toLowerCase","includes","event","target","preventDefault","found","personChange","returnedPerson","personObject","length","returnedPersons","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59163700.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n// const Persons = ({person}) => {\r\n//     return (<div>{person.name} {person.number}</div>)\r\n// }\r\n\r\nconst Persons = ({persons,personService,setPersons,setMessage,setErrorStatus}) => {\r\n    const handleDelete = (id) => {\r\n        console.log(`delete ${id}`)\r\n        const person = persons.find(n => n.id === id)\r\n        const result = window.confirm(`Delete ${person.name} ?`)\r\n        console.log('result',result)\r\n        \r\n        if (result) {\r\n            personService\r\n            .deletePerson(id)\r\n            .then(deletedPerson => {\r\n                setPersons(persons.filter(person => person.id !== id))\r\n                })\r\n                .catch(err => {\r\n                    // const person = persons.find(n => n.id === id)\r\n                    \r\n                    // alert(\r\n                    //     `Failed to delete '${person.name}' from the server`\r\n                    // )\r\n                    setMessage(person.name)\r\n                    setErrorStatus(true)\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                    setTimeout(()=>{\r\n                        setMessage(null)\r\n                        setErrorStatus(false)\r\n                      }, 2000)\r\n                })\r\n        }\r\n        \r\n    }\r\n    return (\r\n    <div>\r\n        {persons.map(person=>\r\n        <div key={person.name}>{person.name} {person.number}\r\n        <button onClick={() => handleDelete(person.id)}>delete</button>\r\n        </div>\r\n        )}\r\n    </div>\r\n    )}\r\n\r\nexport default Persons\r\n\r\n","import React from 'react'\r\n\r\nconst Filter = ({value,onChange}) => <div>filter shown with <input value={value} onChange={onChange}/></div>\r\n\r\n\r\nexport default Filter","import React from 'react' \r\n\r\nconst PersonForm = ({newName, newNumber,\r\n    addPerson, handlePersonChange, handleNumberChange}) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input \r\n            value={newName}\r\n            onChange={handlePersonChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          number: <input \r\n            value={newNumber}\r\n            onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n\r\n// const baseUrl = 'http://localhost:3001/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(res=> res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(res=>res.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(res=>res.data)\r\n}\r\n\r\nexport default {getAll, create, update,deletePerson}","import React from 'react'\r\n\r\n\r\nconst Notification = ({message,error}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"error\">\r\n                Information of {message} has already been removed from server\r\n            </div>\r\n        )    \r\n    }\r\n    return (\r\n        <div className=\"add\">\r\n            Added {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\nimport React, {useState, useEffect} from 'react' \nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\n\nconst App = () => {\n  // const [persons, setPersons] = useState([\n  //   { name: 'Arto Hellas', number: '040-123456' },\n  //   { name: 'Ada Lovelace', number: '39-44-5323523' },\n  //   { name: 'Dan Abramov', number: '12-43-234345' },\n  //   { name: 'Mary Poppendieck', number: '39-23-6423122' }\n  // ])\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorStatus, setErrorStatus] = useState(false)\n  // const hook = () => {\n  //   axios\n  //     .get('http://localhost:3001/persons')\n  //     .then(res => {\n  //       setPersons(res.data)\n  //     })\n  // }\n  // useEffect(hook,[])\n\n  useEffect(()=>{\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  },[])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    // console.log('button clicked', event.target)\n    // Create new person object\n    // const found = persons.some(element => element.name.toLowerCase() === newName.toLowerCase())\n    const found = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n    console.log('found',found)\n    if (found) {\n      // window.alert(`${newName} is already added to phonebook`)\n      const addChange = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (addChange) {\n        const personChange = {\n          ...found,\n          number: newNumber\n        }\n        personService\n          .update(found.id,personChange)\n          .then(returnedPerson => {\n            setPersons(persons.map(person=> person.id !== found.id ? person : returnedPerson))\n          })\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1\n      }\n      \n      personService\n        .create(personObject)\n        .then(returnedPersons => {\n          setPersons(persons.concat(personObject))\n          setNewName('')\n          setNewNumber('')\n          \n          setMessage(newName)\n          setErrorStatus(false)\n\n          setTimeout(()=>{\n            setMessage(null)\n          }, 2000)\n        })\n    }\n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  \n  const handleSearchName = (event) => {\n    setSearchName(event.target.value)\n  }\n\n  const peopleFilters = searchName.lenght ? persons : persons.filter(\n    person => person.name.toLowerCase().includes(searchName.toLowerCase()))\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Notification message={message} error={errorStatus}/>\n        <Filter value={searchName} onChange={handleSearchName}/>\n\n      <h3>Add a new</h3>\n\n      <PersonForm newName={newName}\n          newNumber={newNumber}\n          addPerson={addPerson} \n          handlePersonChange={handlePersonChange}\n          handleNumberChange={handleNumberChange}\n        />\n      \n\n      <h3>Numbers</h3>\n\n      <Persons \n        persons={peopleFilters}\n        personService={personService}\n        setPersons={setPersons}\n        setMessage={setMessage}\n        setErrorStatus={setErrorStatus}\n      />\n    </div>\n  )\n}\n\nexport default App ","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}