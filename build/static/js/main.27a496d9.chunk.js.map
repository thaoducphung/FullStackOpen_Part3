{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Persons","persons","personService","setPersons","notifyMessage","setMessage","map","person","name","number","onClick","id","console","log","find","n","result","window","confirm","deletePerson","then","deletedPerson","filter","catch","err","handleDelete","Filter","value","onChange","PersonForm","newName","newNumber","addPerson","handlePersonChange","handleNumberChange","onSubmit","type","baseUrl","getAll","axios","get","res","data","create","newObject","post","update","put","delete","Notification","notification","className","message","App","useState","setNewName","setNewNumber","searchName","setSearchName","setTimeout","useEffect","initialPersons","peopleFilters","lenght","toLowerCase","includes","event","target","preventDefault","found","personChange","returnedPerson","personObject","length","returnedPersons","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.27a496d9.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n// const Persons = ({person}) => {\r\n//     return (<div>{person.name} {person.number}</div>)\r\n// }\r\n\r\nconst Persons = ({persons,personService,setPersons,setMessage,notifyMessage}) => {\r\n    const handleDelete = (id) => {\r\n        console.log(`delete ${id}`)\r\n        const person = persons.find(n => n.id === id)\r\n        const result = window.confirm(`Delete ${person.name} ?`)\r\n        console.log('result',result)\r\n        \r\n        if (result) {\r\n            personService\r\n            .deletePerson(id)\r\n            .then(deletedPerson => {\r\n                setPersons(persons.filter(person => person.id !== id))\r\n                notifyMessage(`Delete ${person.name}`)\r\n                })\r\n                .catch(err => {\r\n                    // const person = persons.find(n => n.id === id)\r\n                    \r\n                    // alert(\r\n                    //     `Failed to delete '${person.name}' from the server`\r\n                    // )\r\n                    notifyMessage(`${person.name} had already been removed`, 'error')\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                })\r\n        }\r\n        \r\n    }\r\n    return (\r\n    <div>\r\n        {persons.map(person=>\r\n        <div key={person.name}>{person.name} {person.number}\r\n        <button onClick={() => handleDelete(person.id)}>delete</button>\r\n        </div>\r\n        )}\r\n    </div>\r\n    )}\r\n\r\nexport default Persons\r\n\r\n","import React from 'react'\r\n\r\nconst Filter = ({value,onChange}) => <div>filter shown with <input value={value} onChange={onChange}/></div>\r\n\r\n\r\nexport default Filter","import React from 'react' \r\n\r\nconst PersonForm = ({newName, newNumber,\r\n    addPerson, handlePersonChange, handleNumberChange}) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input \r\n            value={newName}\r\n            onChange={handlePersonChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          number: <input \r\n            value={newNumber}\r\n            onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n\r\n// const baseUrl = 'http://localhost:3001/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(res=> res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(res=>res.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(res=>res.data)\r\n}\r\n\r\nexport default {getAll, create, update,deletePerson}","import React from 'react'\r\n\r\n\r\nconst Notification = ({notification}) => {\r\n    if (notification === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n            <div className={notification.type}>\r\n                {notification.message}\r\n            </div>\r\n    )    \r\n}\r\n\r\nexport default Notification","import React, {useState, useEffect} from 'react' \nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [message, setMessage] = useState(null)\n\n  const [errorStatus, setErrorStatus] = useState(false)\n\n  const notifyMessage = (message,type='add') => {\n    setMessage({message,type})\n    setTimeout(()=> {\n      setMessage(null)\n    }, 5000)\n  }\n\n  useEffect(()=>{\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  },[])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const found = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n    console.log('found',found)\n    if (found) {\n      // window.alert(`${newName} is already added to phonebook`)\n      const addChange = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (addChange) {\n        const personChange = {\n          ...found,\n          number: newNumber\n        }\n        personService\n          .update(found.id,personChange)\n          .then(returnedPerson => {\n            setPersons(persons.map(person=> person.id !== found.id ? person : returnedPerson))\n            notifyMessage(`Changed number of  ${found.name}`)\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1\n      }\n      personService\n        .create(personObject)\n        .then(returnedPersons => {\n          setPersons(persons.concat(personObject))\n          setNewName('')\n          setNewNumber('')\n          notifyMessage(`Add ${newName}`)\n        })\n    }\n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  \n  const handleSearchName = (event) => {\n    setSearchName(event.target.value)\n  }\n\n  const peopleFilters = searchName.lenght ? persons : persons.filter(\n    person => person.name.toLowerCase().includes(searchName.toLowerCase()))\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Notification notification={message}/>\n        <Filter value={searchName} onChange={handleSearchName}/>\n\n      <h3>Add a new</h3>\n\n      <PersonForm newName={newName}\n          newNumber={newNumber}\n          addPerson={addPerson} \n          handlePersonChange={handlePersonChange}\n          handleNumberChange={handleNumberChange}\n        />\n      \n\n      <h3>Numbers</h3>\n\n      <Persons \n        persons={peopleFilters}\n        personService={personService}\n        setPersons={setPersons}\n        setMessage={setMessage}\n        notifyMessage={notifyMessage}\n      />\n    </div>\n  )\n}\n\nexport default App ","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}